<h3>Profile Details</h3>
<p><%= flash[:error] %></p>
<table>
  <tr>
    <td style="padding:5px;">
      <%= button_to "Refresh Data", { action: :show }, method: :get %>
    </td>
    <td style="padding:5px;">
      <%= button_to "Delete Profile", { action: :destroy, uuid: @profile.uuid }, { method: :delete, data: { confirm: 'Are you sure?' } } %></strong>
    </td>
    <td style="padding:5px;">
      <%= button_to "Reset State", { action: :update_state, state: 'waiting_for_matches', uuid: @profile.uuid }, method: :post %>
    </td>
    <% unless @profile.mutual_match? %>
    <td style="padding:5px;">
      <%= button_to "Generate Mutual Match", { action: :create_mutual_match, for_profile_uuid: @profile.uuid }, method: :post %>
    </td>
    <% end %>
    <td style="padding:5px;">
      <%= button_to "Reverse Gender", { action: :reverse_gender, uuid: @profile.uuid }, method: :post %>
    </td>
  </tr>
</table>
<p><strong>UUID</strong>: <%= @profile.uuid %></p>
<p><strong>Name</strong>: <%= @profile.firstname %> <%= @profile.lastname %></p>
<p>
  <strong>State</strong>: <%= @profile.state %><br>
  <strong>Endpoint: </strong><%= @profile.state_endpoint %><br>
  <% if @profile.mutual_match? %>
    <% match = @profile.matches.mutual_like.take %>
    <%= link_to "Match Profile", { action: :show, profile_uuid: match.matched_profile.uuid }, target: '_blank' %>
    &nbsp; <strong>Match ID: </strong><%= match.id %>
  <% end %>
</p>
<p><strong>JWT token</strong>: <%= JsonWebToken.encode(@profile.auth_token_payload) %></p>
<p>
  <ul>
  <% @profile.attributes.each do |k, v| %>
    <% next if k == 'properties' %>
    <li><strong><%= k %></strong>: <%= v %></li>
  <% end %>
  </ul>
</p>
<br>
<% @profile.photos.each do |photo| %>
  <%= image_tag "#{Constants::CLOUDINARY_HOST_URL}w_64,h_64,r_max,c_fill,g_face:center/#{photo.public_id}.jpg" %>
<% end %>

